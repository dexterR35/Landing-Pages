<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <title>Document</title>
  </head>

  <body>
    <div id="result"></div>
    <script>
      async function checkUser(username) {
        const apiUrl =
          "https://casino-promo.netbet.ro/scripts/streamers/get.php?srv=check_user";

        try {
          const response = await fetch(apiUrl);

          if (!response.ok) {
            throw new Error("Network response was not ok");
          }

          const checkUserData = await response.json();
          const usernames = checkUserData.map((user) => user.username);

          if (usernames.includes(username)) {
            console.log(`Username ${username} exists in the API.`);
          } else {
            console.log(`Username ${username} does not exist in the API.`);
          }
        } catch (error) {
          console.error("Error: Unable to retrieve data from the API.", error);
        }
      }

      // Call the checkUser function with the username "ticucatalin"
      checkUser("testpacanela");
      checkUser("gabitza1");
      checkUser("Marian");

      // function checkUser(username) {
      //   const apiUrl =
      //     "https://casino-promo.netbet.ro/scripts/streamers/get.php?srv=check_user";

      //   fetch(apiUrl)
      //     .then((response) => {
      //       if (!response.ok) {
      //         throw new Error("Network response was not ok");
      //       }
      //       return response.json();
      //     })
      //     .then((checkUserData) => {
      //       console.log(checkUserData, "checkUser");
      //       const usernames = checkUserData.map((user) => user.username);
      //       if (usernames.includes(username)) {
      //         console.log(`Username ${username} exists in the API.`);
      //       } else {
      //         console.log(`Username ${username} does not exist in the API.`);
      //       }
      //     })
      //     .catch((error) => {
      //       console.error(
      //         "Error: Unable to retrieve data from the API.",
      //         error
      //       );
      //     });
      // }

      // // Call the checkUser function with the username "ticucatalin"
      // checkUser("ticucatalin");
      // checkUser("gabitza1");
      // checkUser("Marian");
    </script>
  </body>
</html>
