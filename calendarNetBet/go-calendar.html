{block name="add_char"}

<!-- <div id="container-snow" style="z-index:150 ;perspective :250px;"></div> -->
<div class="wrapper-all">
  <h1 class="title-calendar">Luna Reducerilor <br> de iarnă</h1>
  <div class="prizes-container">
    <div
      class="prizes-text"
      data-text="dă click pe cadoul zilei
        și vezi ce ai câștigat"
    >
      dă click pe cadoul zilei <br />
      și vezi ce ai câștigat
    </div>
  </div>
  <div id="modal-container">
    <div class="modal-background">
      <div class="modal">
        <div class="box-container">
          <!-- <a class="close" href="javascript: void(0);">&times;</a> -->
          <div class="box-main">
            <div id="my-div" class="center-div"></div>
          </div>
          <div class="buttons-modal">
            <button class="btn-modal register">inregistrează-te</button>
            <button class="btn-modal close-btn">revino mâine</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="main-container"></div>
 
</div>
{/block} {block name="offer_css"}

<style>
  @media (orientation: landscape) and (min-width: 992px) {
    .char {
      top: unset;
      position: unset;
      left: unset;
      z-index: unset;
      height: unset;

    }
    .title-calendar br {
      display: none;

    }
  }
  .offer {
    display: none;
  }
button {
  cursor: pointer;
}
  header {
    height: 5.11em !important;
  }
  header .bottom {
    display: none !important;
  }
  .container-hero {
    height: 100%;
    max-width: 1200px;
    min-width: 300px;
    display: flex;
    justify-content: center;
    align-items: center !important;
    position: relative;
    margin: 0 auto;
  }
  .cta-button.mobile {
    display: none;
  }

  .promo-text {
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
  }

  .splash-screen {
    z-index: 250;
  }

  .char {
    z-index: 2;
  }

  .char.onmobile {
    display: none;
  }

  footer {
    opacity: 1 !important;
  }

  .promo-text > .inner > span {
    color: #ffd101 !important;
  }

  .cta-button {
    font-size: 1.9vh !important;
    padding: 0 1.5em;
    margin-top: 0.2em;
    margin-bottom: 0.5em;
    text-align: center;
    display: flex;
    justify-content: center;
    box-shadow: inset 0px 0px 18px 2px rgb(245 86 60 / 56%),
      0px 0px 18px 5px rgb(170 39 0 / 35%);
  }

  header {
    z-index: 200;
  }

  .promo-text {
    position: relative;
  }

  .swiper-slide {
    margin-right: 1px !important;
  }

  .promo-text {
    text-transform: uppercase;
  }

  .steps {
    z-index: 199 !important;
  }

  .steps .separator {
    margin-right: 15px;
  }

  .promo-text,
  .below-fold {
    z-index: 140;
  }
  .wrapper-all {
    display: flex;
    position: relative;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    grid-template-columns: repeat(5, minmax(150px, 1fr));
    grid-template-rows: repeat(5, minmax(150px, 1fr));
  }
  .wrapper-all h1,
  .wrapper-all h1::before,
  #my-div,
  .btn-box span,
  .prizes-text {
    font-weight: bold;
    text-transform: uppercase;
  }
  .wrapper-all h1 {
    z-index: 2;
    margin-bottom: 20px;
    font-size: 3rem;
    position: relative;
  }

  .wrapper-all h1::before {
    content: "luna reducerilor \A de iarna";
    z-index: -2;
    left: 0;
    top: 0;
    position: absolute;
    text-shadow: 3px 2px 2px rgba(255, 0, 0, 0.863);
    -webkit-text-shadow: 3px 2px 2px rgba(255, 0, 0, 0.863);
    -moz-text-shadow: 3px 2px 2px rgba(255, 0, 0, 0.863);
  }
  .wrapper-all h1::after {
    content: "luna reducerilor \A de iarna";
    z-index: 2;
    left: 0;
    top: 0px;
    position: absolute;
    background-image: linear-gradient(180deg, #0b2f71 40%, #080317);
    background-size: 100%;
    background-repeat: no-repeat;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    -moz-background-clip: text;
    -moz-text-fill-color: transparent;
    -webkit-text-fill-color: transparent;
  }

  .btn-box {
    border: none;
    outline: none;
    position: relative;
    z-index: 10;
    color: white;
    width: 100%;
    height: 100%;
    background-size: 80%;
    background-repeat: no-repeat;
    background-position: center;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .btn-box.disabled-openA1 {
    background-image: url({$asset}/Cadoupartial1.png);
    pointer-events: none;
  }

  .btn-box.disabled-openB2 {
    background-image: url({$asset}/Cadoupartial2.png);
    pointer-events: none;
  }
  .btn-box.disabled-openC3 {
    background-image: url({$asset}/Cadoupartial3.png);
    pointer-events: none;
  }

  .btn-box.disabled-openD4 {
    background-image: url({$asset}/Cadoupartial4.png);
    pointer-events: none;
  }

  .btn-box.disabled-full {
    background-image: url({$asset}/cadou-full-disabled.png);
    pointer-events: none;
  }
  .btn-box.-normal {
    background-image: url({$asset}/cadou-full.png);
    cursor: pointer;
  }
  .btn-box2 {
    border: none;
    outline: none;
    position: relative;
    z-index: 10;
    color: black;
    width: 100%;
    height: 100%;
    background-size: 70%;
    background-image: url({$asset}/cadou-partial.png) !important;
    background-repeat: no-repeat;
    background-position: center;
  }

  .btn-box span {
    z-index: 200;
    color: white;
    position: absolute;
    top: 71px;
    font-size: 2em;
    /* height: 100%; */
  }
  .content {
    position: relative;
  }
  .content::before {
    content: "";
    position: absolute;
    top: 57%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 53%;
    height: 60%;
    box-shadow: 10px 10px 10px #444141;
  }
  .-today.pulse::before {
    content: "";
    position: absolute;
    top: 23%;
    left: 23%;
    border-radius: 30px;

    /* box-shadow: 0 0 20px 10px rgba(255, 0, 0, 0.753); */
    animation: pulse-red 1.5s ease-out infinite;
  }
  .-normal-shake {
    animation: an-shake 1s cubic-bezier(0.23, 0.6, 0.7, 0.13) both infinite 3s;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
  /*
            .btn-box:hover {
              transition: ease 0.3s;
              transform: scale(1.1);
              -webkit-transform: scale(1.1);
            } */

  /* .btn-box:active {
              transition: ease 0.1s;
              transform: scale(1);
            } */

  #main-container {
    display: grid;
    /* grid-gap: 15px; */
    grid-template-columns: repeat(7, minmax(16vh, 1fr));
    grid-template-rows: repeat(4, minmax(16vh, 1fr));
    color: #444;
  }

  #my-div {
    position: relative;
    height: 100%;
    width: 100%;
    position: absolute;
    background-size: 60%;
    background-repeat: no-repeat;
    background-position: center 108px;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 1.5em;
    margin-top: -20px;
  }

  .box-main {
    background-size: contain;
    background-image: url({$asset}/cadou-partial.png);
    background-repeat: no-repeat;
    background-position: center;
    width: 400px;
    height: 400px;
  }

  .box-container {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    width: fit-content;
    margin: auto;
  }

  /* html.modal-active, body.modal-active {
      	 overflow: hidden;
      } */
  #modal-container {
    position: fixed;
    display: table;
    height: 100%;
    width: 100%;
    top: 0;
    left: 0;
    transform: scale(0);
    z-index: 1;
  }

  #modal-container.four {
    z-index: 50;
    transform: scale(1);
  }

  #modal-container.four .modal-background {
    background: rgba(3, 17, 41, 0.60);
  }

  #modal-container.four .modal-background .modal {
    animation: blowUpModal 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }

  #modal-container .modal-background {
    display: table-cell;
    background: rgba(3, 17, 41, 0.60);
    text-align: center;
    vertical-align: middle;
  }

  #modal-container .modal-background .modal {
    padding: 50px;
    position: relative;
    top:-55px;
    /* background-size: contain;
              background-image: url({$asset}/cadou-full.png);
              background-repeat: no-repeat;
              background-position: center; */
  }

  #modal-container.four.out .modal-background .modal {
    animation: blowUpModalTwo 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
  }

  @keyframes blowUpModal {
    0% {
      transform: scale(0);
    }

    100% {
      transform: scale(1);
    }
  }

  .prizes-container {
    display: flex;
    align-items: center;
    justify-content: center;
    color: black;
    position: relative;
    width: 100%;
    top: 0;
    left: 0;    
    padding: 0 13px;
  }

  .prizes-text {
    font-size: 1.1em;
    text-transform: uppercase;
    text-align: center;
  }
  .btn-modal {
    padding: 10px 10px;
    background-color: orangered;
    font-size: 0.75em;
    text-transform: uppercase;
    color: white;
    border-radius: 5px;
    outline: none;
    border: none;
    width: 38.5%;
  }

  @keyframes pulse-red {
    0% {
      transform: scale(1);
      background: rgba(255, 0, 0, 0.853);
      box-shadow: 0 0 20px 10px rgba(255, 0, 0, 0.853);
    }

    70% {
      transform: scale(1.1);
      box-shadow: 0 0 20px 10px rgba(255, 0, 0, 0.253);
    }

    100% {
      transform: scale(1);
      box-shadow: 0 0 20px 10px rgba(255, 0, 0, 0.053);
    }
  }

  @keyframes an-shake {
    10%,
    90% {
      transform: translate3d(-1px, 0, 0);
    }

    20%,
    80% {
      transform: translate3d(2px, 0, 0);
    }

    30%,
    50%,
    70% {
      transform: translate3d(2px, 0, 0);
    }

    40%,
    60% {
      transform: translate3d(4px, 0, 0);
    }
  }

  @media screen and (orientation: portrait) {
    .prizes-container {
      position: relative;
      top: 0;
      left: 0;
    }
    .box-main {
      width: 100%;
      height: 270px;
    }
    #my-div {
      position: relative;
      height: 100%;
      width: 100%;
      background-size: 75%;
      background-repeat: no-repeat;
      background-position: center 58px;
      margin-top: unset;
      font-size: unset;
      display: block;
    }
    .buttons-modal {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .btn-modal {
      background-color: orangered;
      font-size: 0.75em;
      text-transform: uppercase;
      color: white;
      border-radius: 5px;
      outline: none;
      border: none;
      padding: 1em 3em;
      margin-bottom: 1.2em;
      width: 100%;
    }
  }

  @media screen and (min-width: 320px) {
    #main-container {
      grid-template-columns: repeat(5, minmax(9vh, 1fr));
      grid-template-rows: repeat(5, minmax(10vh, 1fr));
    }
    .wrapper-all h1 {
      font-size: 2rem;
    text-align: center;
    }
    .btn-box span {
      top: 41px;
    font-size: 1.3em;
    }
    .prizes-container {
      padding: 10px 13px;
    }
  }

  @media screen and (min-width: 480px) {
    #main-container {
      grid-template-columns: repeat(5, minmax(12vh, 1fr));
      grid-template-rows: repeat(5, minmax(12vh, 1fr));
    }
  
    .btn-box span {
      top: 45px;
      font-size: 1.1em;
    }

  }
  @media screen and (min-width: 600px) {
    #main-container {
      grid-template-columns: repeat(5, minmax(13vh, 1fr));
      grid-template-rows: repeat(5, minmax(13vh, 1fr));
    }
    .wrapper-all h1 {
      font-size: 1.5rem;
    }
    .btn-box span {
      top: 45px;
      font-size: 1.1em;
    }

    
  }
  @media screen and (min-width: 768px) {
    #main-container {
      grid-template-columns: repeat(5, minmax(12vh, 1fr));
      grid-template-rows: repeat(5, minmax(12vh, 1fr));
    }
  }

  @media screen and (min-width: 992px) {
    #main-container {
      grid-template-columns: repeat(7, minmax(13vh, 1fr));
      grid-template-rows: repeat(4, minmax(13vh, 1fr));
    }
    .wrapper-all h1 {
      font-size: 5rem;
    }
    .prizes-container {
      position: absolute;
      bottom: 38px;
      left:0;
      top: unset;
    }
  }

  @media screen and (min-width: 1200px) {
    #main-container {
      grid-template-columns: repeat(7, minmax(14vh, 1fr));
      grid-template-rows: repeat(4, minmax(14vh, 1fr));
    }
    .btn-box span {
    top: 66px;
    font-size: 1.5em;
}
  }

  .shake-box {
    transform: translate3d(4px, 0, 0);
  }

  .open_daybefore {
    -webkit-filter: grayscale(100%); /* Safari 6.0 - 9.0 */
    filter: grayscale(100%);
  }
  /* .displayValues img {
        width: 50%;
      } */

  @media (max-width: 450px) {
    .promo-text {
      font-size: 18px !important;
      padding: 0.2em 0.5em;
    }
    .above-fold {
      height: calc(100vh - 65px) !important;
    }
    .providers .swiper-slide {
      width: 28% !important;
    }
  }

  @media (orientation: portrait) {
    .separator-mobile {
      display: none;
    }

    .cta-button.mobile.animation {
      z-index: 103;
    }

    footer .terms-toggle {
      font-size: 1.8em;
      width: fit-content;
      padding: 0.3em 1em !important;
    }

    .below-fold {
      z-index: 199;
    }
  }

  @media (min-width: 1921px) {
    .above-fold {
      max-height: unset;
    }
  }

  @media (min-width: 320px) {
    .text-mobile {
      display: flex;
      flex-direction: column-reverse;
      align-items: center;
      width: 80%;
      justify-content: center;
      text-align: center;
      margin: 0 auto;
    }
  }

  @media (orientation: portrait) and (min-aspect-ratio: 500 / 736) and (min-width: 500px) {
    .above-fold {
      height: 100vh;
      max-height: 97vh;
    }
  }

  @media screen and (max-width:991px) {
    .text br {
      display: none;
    }
  
    
  }
</style>

{/block} {block append name=js} {literal}

<script>
  // Get current date
  let today = new Date();
  let dateToday = today.getDate();
  let dateFullYear = today.getFullYear();
  let dateMonth = today.getMonth();
  let inputDate = new Date("january 2, 2023");
  let outputDate = new Date("january 24, 2023");
  let dateStart = inputDate.getDate();
  let dateEnd = outputDate.getDate();
  let boxes = document.getElementById("main-container");
  let boxesNumber = document.querySelector(".displayValues");
  let my_div = document.getElementById("my-div");

  // expected output: 19

  /*A1 = prize 1*/
  /*B2 = prize 2*/
  /*C3 = prize 3*/
  /*D4 = prize 4a*/

  const correct = [
    "B2",
    "A1",
    "D4",
    "B2",
    "D4",
    "A1",
    "C3",
    "A1",
    "C3",
    "D3",
    "C3",
    "A1",
    "D3",
    "B2",
    "D4",
    "C3",
    "A1",
    "D4",
    "C3",
    "A1",
    "B2",
    "D4",
    "A1",
  ];

  const codes = ["300DEAD", "350BASS", "250MADNESS", "150DOG"];

  // Create the correct sequence of prizes - index 0 is 9th of January
  //    guide   = ["9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"];

  // Create an array of possible values

  const values = ["A1", "B2", "C3", "D4"];
  // An array of four possible background images

  const backgroundImages = [
    'https://go-testing.netbet.ro/lp-asset/netbetro/casino/calendarNetBet/Prize1.png',
    'https://go-testing.netbet.ro/lp-asset/netbetro/casino/calendarNetBet/Prize2.png',
    'https://go-testing.netbet.ro/lp-asset/netbetro/casino/calendarNetBet/Prize3.png',
    'https://go-testing.netbet.ro/lp-asset/netbetro/casino/calendarNetBet/Prize4A.png'
  ];

  function generate_box() {
    let boxes = document.getElementById("main-container");
    recentDay = dateToday;
    for (let k = dateStart; k <= dateEnd; k++) {
      let _correct = correct[k - 2];
      if (k < recentDay) {
        console.log(k, "k mai mic recentDay");
        boxes.innerHTML +=
          "<div class ='content -smaller'>" +
          "<div class='btn-box open_daybefore four disabled-open" +
          _correct +
          "' id='four' >" +
          "<span class='displayValues' id='images'>";
        "</span>" + "</div>" + "</div>";

        console.log(_correct, "correct de K");
      } else if (k > recentDay) {
        console.log(k, "k mai mare recentDay");

        boxes.innerHTML +=
          "<div class ='content -greater'>" +
          "<div class='btn-box four disabled-full' id='four' >" +
          "<span class='displayValues'>" +
          k +
          "</span>" +
          "</div>" +
          "</div>";
      } else {
        console.log(k, "k egal recentDay");

        if (_correct == "A1") {
          link_code = codes[0];
        } else if (_correct == "B2") {
          link_code = codes[1];
        } else if (_correct == "C3") {
          link_code = codes[2];
        } else {
          link_code = codes[3];
        }

        console.log("codul este", link_code);

        boxes.innerHTML +=
          "<div class ='content -today pulse'>" +
          "<div class='btn-box four -normal -normal-shake ' id='four' >" +
          "<span class='displayValues'>" +
          k +
          "</span>" +
          "</div>" +
          "</div>";
      }
    }
  }

  // Create the starting time value

  const timer = 120;

  function createRandomSequence() {
    let sequence = [];
    // Add a random value to the sequence, making sure it's not the same as the previous value and the 9th value is different from the correct (10th value)
    let previousValue = null;
    while (sequence.length < 10) {
      let randomIndex = Math.floor(Math.random() * values.length);
      let randomValue = values[randomIndex];

      if (randomValue !== previousValue && randomValue !== correct[dateToday]) {
        sequence.push(randomValue);
        previousValue = randomValue;
      }
    }
    // Make sure the last value in the sequence is correct
    sequence[sequence.length - 1] = correct[dateToday];
    console.log("dateToday", dateToday);
    return sequence;
  }

  function updateDiv(my_div, sequence) {
    // console.log(my_div, "1");
    // console.log(sequence);
    let index = 0;
    setInterval(() => {
      // Stop the interval when we reach the end of the sequence
      if (index >= sequence.length) {
        clearInterval(this);
        return;
      }

      // Update the div with the next value in the sequence
      // my_div.innerHTML = sequence[index];
      my_div.setAttribute("src", sequence[index]);
      // Set the background image of the div to the image at the random index
      my_div.style.backgroundImage = `url(${
        backgroundImages[values.indexOf(sequence[index])]
      })`;

      index++;
    }, timer); // Update the div

    // test
  }

  function click_box(e) {
    let allButtons = document.querySelectorAll(".btn-box");
    allButtons.forEach(function (b, i) {
      b.addEventListener(
        "click",
        function () {
          let buttonId = $(this).attr("id");
          console.log(buttonId, "buttonId");
          if ($(".four").find(".-normal")) {
            $("#modal-container").addClass(buttonId);
            $("body").addClass("modal-active");
            $(this).addClass("btn-box2");
            $(this).removeClass("-normal-shake");
          } else {
            e.stopPropagation();
            e.preventDefault();
          }
          let sequence = createRandomSequence();

          // Get the div element
          // Start updating the div with the values from the sequence
          let updateDiv1 = updateDiv(my_div, sequence);
          $(".close-btn").click(function () {
            $("#modal-container").removeClass(buttonId);
            $("body").removeClass("modal-active");
          });
          console.log("updateda", my_div);
          $("#my-div").css(buttonId);
        },
        {
          once: true,
        }
      );
    });
  }

  $(document).ready(function () {
    console.log("ready!");
    generate_box();
    click_box();
  });
</script>

{/literal} {/block}
