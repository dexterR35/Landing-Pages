<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.jquery.com/jquery-3.6.3.js"
      integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
      crossorigin="anonymous"
    ></script>
    <title>Document</title>
    <style>
      button {
        border: 1px solid black;
      }

      #main-container {
        display: grid;
        grid-gap: 10px;
        grid-template-columns: repeat(5, minmax(70px, 1fr));
        grid-template-rows: repeat(5, minmax(70px, 1fr));
        background-color: #fff;
        color: #444;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <div id="my-div" class="center-div">
        <p>My text</p>
      </div>
      <p>Secventa random generata este: <span id="secventa"></span></p>
      <div id="main-container"></div>
    </div>
    <script>
      generate_box();

      function generate_box() {
        for (var k = 1; k <= 23; k++) {
          document.getElementById("main-container").innerHTML +=
            "<button>" + k + "</button>";
        }
      }
    </script>
    <script>
      // Get current date
      var today = new Date();
      var date = today.getDate();
      console.log(date);

      // Create the correct sequence of prizes - index 0 is 9th of January
      //    guide   = ["9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"];
      const correct = [
        "200rotiri",
        "100rotiri",
        "300rotiri",
        "50rotiri",
        "40rotiri",
        "30rotiri",
        "10rotiri",
        "150rotiri",
        "350rotiri",
        "150rotiri",
        "200rotiri",
        "300rotiri",
        "50rotiri",
        "40rotiri",
        "30rotiri",
        "10rotiri",
        "150rotiri",
        "350rotiri",
        "50rotiri",
        "40rotiri",
        "30rotiri",
        "10rotiri",
        "150rotiri",
     
      ];

      // Create an array of possible values
      const values = ["A1", "B2", "C3", "D4"];

      // An array of four possible background images
      const backgroundImages = [
        "image1.jpg",
        "image2.jpg",
        "image3.jpg",
        "image4.jpg",
      ];

      // Create the starting time value
      const timer = 300;

      function createRandomSequence() {
        // Create an empty array to store the random sequence
        let sequence = [];

        // Add a random value to the sequence, making sure it's not the same as the
        // previous value and the 9th value is different from the correct (10th value)
        let previousValue = null;
        while (sequence.length < 10) {
          let randomIndex = Math.floor(Math.random() * values.length);
          let randomValue = values[randomIndex];
          if (
            randomValue !== previousValue &&
            randomValue !== correct[date - 9]
          ) {
            sequence.push(randomValue);
            previousValue = randomValue;
          }
        }

        // Make sure the last value in the sequence is correct
        sequence[sequence.length - 1] = correct[date - 9];

        console.log(sequence);
        return sequence;
      }

      function updateDiv(my_div, sequence) {
        let index = 0;
        setInterval(() => {
          // Stop the interval when we reach the end of the sequence
          if (index >= sequence.length) {
            clearInterval(this);
            return;
          }
          console.log(sequence[index], "index");
          // Update the div with the next value in the sequence
          my_div.innerHTML = sequence[index];

          // Set the background image of the div to the image at the random index
          my_div.style.backgroundImage = `url(${
            backgroundImages[values.indexOf(sequence[index])]
          })`;

          index++;
          console.log(index, "index");
        }, timer); // Update the div
      }

      function click_box() {
        var allButtons = document.querySelectorAll("button");
        allButtons.forEach(function (b, i) {
          b.addEventListener("click", function () {
            // alert(i + 1);
            // console.log(b + 1, "click");
            let sequence = createRandomSequence();
            console.log(sequence, "seq");

            // Create the random sequence

            // Get the div element
            let my_div = document.getElementById("my-div");
            console.log(my_div, "div");

            // Start updating the div with the values from the sequence
            updateDiv(my_div, sequence);

            document.getElementById("secventa").innerHTML = sequence;
          });
        });
      }
      click_box();
    </script>
  </body>
</html>
