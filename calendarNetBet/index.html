<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.jquery.com/jquery-3.6.3.js"
      integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
      crossorigin="anonymous"
    ></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <title>Document</title>
    <style>
      *,
      *::after,
      *::before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        height: 100vh;
        position: relative;
        font-family: "Play", sans-serif;
        overflow: hidden;
      }

      body::before {
        position: fixed;
        content: "";
        background-image: url(./img/bg-desktop.jpg);
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        width: 100%;
        height: 100%;
      }

      .wrapper {
        margin-top: 80px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        grid-template-columns: repeat(5, minmax(150px, 1fr));
        grid-template-rows: repeat(5, minmax(150px, 1fr));
      }
      .wrapper h1,
      .wrapper h1::before,
      #my-div,
      .btn-box span,
      .prizes-text,
      .prizes::after {
        font-weight: bold;
        text-transform: uppercase;
      }
      .wrapper h1 {
        z-index: 2;
        margin-bottom: 20px;
        font-size: 4.5em;
        position: relative;
      }

      .wrapper h1::before {
        content: "luna reducerilor de iarna";
        z-index: -2;
        left: 0;
        top: 0;
        position: absolute;
        text-shadow: 3px 2px 2px rgba(255, 0, 0, 0.863);
        -webkit-text-shadow: 3px 2px 2px rgba(255, 0, 0, 0.863);
        -moz-text-shadow: 3px 2px 2px rgba(255, 0, 0, 0.863);
      }
      .wrapper h1::after {
        content: "luna reducerilor de iarna";
        z-index: 2;
        left: 0;
        top: 0px;
        position: absolute;
        background-image: linear-gradient(180deg, #0b2f71 40%, #080317);
        background-size: 100%;
        background-repeat: no-repeat;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        -moz-background-clip: text;
        -moz-text-fill-color: transparent;
        -webkit-text-fill-color: transparent;
      }

      .btn-box {
        border: none;
        outline: none;
        position: relative;
        z-index: 10;
        color: white;
        width: 100%;
        height: 100%;
        background-size: 70%;
        background-image: url(./img/cadou-full.png);
        background-repeat: no-repeat;
        background-position: center;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .btn-box2 {
        border: none;
        outline: none;
        position: relative;
        z-index: 10;
        color: black;
        width: 100%;
        height: 100%;
        background-size: contain;
        background-image: url(./img/cadou-partial.png);
        background-repeat: no-repeat;
        background-position: center;
      }

      .btn-box span {
        z-index: 200;
        color: white;
        position: absolute;
        top: 71px;
        font-size: 2em;
        /* height: 100%; */
      }
      .content {
        position: relative;
      }
      .content::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -40%);
        width: 55%;
        height: 60%;
        box-shadow: 5px 9px 13px #444141;
      }
      .content:nth-child(11)::before {
        border-radius: 30px;
        box-shadow: 0 0 20px 10px rgba(255, 0, 0, 0.753);
      }

      .btn-box:hover {
        transition: ease 0.3s;
        transform: scale(1.1);
        -webkit-transform: scale(1.1);
      }

      .btn-box:active {
        transition: ease 0.1s;
        transform: scale(1);
      }

      #main-container {
        display: grid;
        /* grid-gap: 15px; */
        grid-template-columns: repeat(7, minmax(150px, 1fr));
        grid-template-rows: repeat(4, minmax(150px, 1fr));
        color: #444;
      }

      #my-div {
        position: relative;
        height: 100%;
        width: 100%;
        position: absolute;
        background-size: 60%;
        background-repeat: no-repeat;
        background-position: center 108px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 1.5em;
        margin-top: -20px;
      }

      .box-main {
        background-size: contain;
        background-image: url(./img/cadou-partial.png);
        background-repeat: no-repeat;
        background-position: center;
        width: 400px;
        height: 400px;
      }

      .box-container {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: center;
        width: fit-content;
        margin: auto;
      }

      /* html.modal-active, body.modal-active {
	 overflow: hidden;
} */
      #modal-container {
        position: fixed;
        display: table;
        height: 100%;
        width: 100%;
        top: 0;
        left: 0;
        transform: scale(0);
        z-index: 1;
      }

      #modal-container.four {
        z-index: 50;
        transform: scale(1);
      }

      #modal-container.four .modal-background {
        background: rgba(0, 0, 0, 0.9);
      }

      #modal-container.four .modal-background .modal {
        animation: blowUpModal 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
      }

      #modal-container .modal-background {
        display: table-cell;
        background: rgba(0, 0, 0, 0.8);
        text-align: center;
        vertical-align: middle;
      }

      #modal-container .modal-background .modal {
        padding: 50px;
        position: relative;
        /* background-size: contain;
        background-image: url(./img/cadou-full.png);
        background-repeat: no-repeat;
        background-position: center; */
      }

      #modal-container.four.out .modal-background .modal {
        animation: blowUpModalTwo 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)
          forwards;
      }

      @keyframes blowUpModal {
        0% {
          transform: scale(0);
        }

        100% {
          transform: scale(1);
        }
      }

      .prizes-container {
        z-index: 1;
        grid-column: 3 / span 5;
        grid-row: 4;
        display: flex;
        align-items: center;
        justify-content: space-around;
        color: black;
      }
      .prizes {
        border: 1px solid #0000007a;
        padding: 20px 10px 10px;
        position: relative;
        border-radius: 10px;
        box-shadow: 2px 6px 10px #0000007a;
        mix-blend-mode: multiply;
      }
      .prizes::after {
        content: "poți câștiga";
        position: absolute;
        top: -17px;
        left: 34%;
        z-index: 10;
        padding: 2px 10px;
        background: rgb(4, 114, 165);
        color: rgb(255, 255, 255);
        font-size: 1.2em;
        border-radius: 5px;
        text-transform: uppercase;
      }
      .prizes::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        box-shadow: inset 0 0 200px rgba(4, 91, 161, 0.26);
        filter: blur(10px);
        width: 100%;
        height: 100%;
        z-index: -2;
        mix-blend-mode: normal;
        opacity: 0.5;
        background: white;
      }
      .prizesS img {
        width: 80px;
        /* aspect-ratio: 3/2;
        object-fit: contain; */
      }
      .prizes-text {
        font-size: 1.1em;
        text-transform: uppercase;
        text-align: center;
      }
      .btn-modal {
        padding: 10px 10px;
        background-color: orangered;
        font-size: 0.75em;
        text-transform: uppercase;
        color: white;
        border-radius: 5px;
        outline: none;
        border: none;
        width: 38.5%;
      }

      @media screen and (orientation: portrait) {
      }

      @media screen and (max-width: 600px) {
      }

      @media screen and (max-width: 768px) {
      }

      @media screen and (min-width: 992px) {
      }

      @media screen and (min-width: 1200px) {
      }
    </style>
  </head>

  <body>
    <div class="wrapper">
      <h1>Luna Reducerilor de iarnă</h1>
      <h2 data-text="Luna Reducerilor de iarnă.......">
        Luna Reducerilor de iarnă.......
      </h2>
      <div id="modal-container">
        <div class="modal-background">
          <div class="modal">
            <div class="box-container">
              <!-- <a class="close" href="javascript: void(0);">&times;</a> -->
              <div class="box-main">
                <div id="my-div" class="center-div"></div>
              </div>
              <div class="buttons-modal">
                <button class="btn-modal register">inregistrează-te</button>
                <button class="btn-modal close-btn">revino mâine</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- 
      <p>Secventa random : <span id="secventa"></span></p> -->
      <div id="main-container">
        <div class="prizes-container">
          <div
            class="prizes-text"
            data-text="dă click pe cadoul zilei
          și vezi ce ai câștigat"
          >
            dă click pe cadoul zilei <br />
            și vezi ce ai câștigat
          </div>
          <div class="prizes">
            <div class="prizesS">
              <img src="./img/Prize1.png" alt="1" srcset="" />
              <img src="./img/Prize2.png" alt="2" srcset="" />
              <img src="./img/Prize3.png" alt="43" srcset="" />
              <img src="./img/Prize4A.png" alt="4" srcset="" />
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="contents" id="contentsss"></div> -->
    </div>

    <script>
      // Get current date
      let today = new Date();
      let dateToday = today.getDate();
      let dateFullYear = today.getFullYear();
      let dateMonth = today.getMonth();
      let inputDate = new Date(2022,12,9);
      let outputDate = new Date(2022,12,31);
      var d = new Date();
      d.setDate(d.getDate() - d.getDay());
      let diffDate = inputDate- outputDate;
      isDisabled = false;
      console.log(inputDate,"test");
      console.log(outputDate,"test");
      console.log(diffDate,"test2");
      console.log(dateToday);
      console.log(d);
      const birthday = new Date('August 19, 1975 23:15:30');
const date1 = birthday.getDate();

console.log(date1);
// expected output: 19
      const correct = [
        "9 ianuarie",
        "10 ianuarie",
        "11 ianuarie",
        "12 ianuarie",
        "13 ianuarie",
        "14 ianuarie",
        "15 ianuarie",
        "16 ianuarie",
        "17 ianuarie",
        "18 ianuarie",
        "19 ianuarie",
        "20 ianuarie",
        "21 ianuarie",
        "22 ianuarie",
        "23 ianuarie",
        "./img/todayPrize.png",
        "./img/todayPrize.png",
        "26 ianuarie",
        "./img/todayPrize.png",
        "28 ianuarie",
        "29 ianuarie",
        "30 ianuarie",
        "31 ianuarie",
      ];
      function generate_box() {
        for (let k = 9; k <= 31 ; k++) {
          let boxes = (document.getElementById("main-container").innerHTML +=
            "<div class ='content'>" +
            "<div class='btn-box four ttest' id='four' >" +
            "<span class='displayValues'>" +
            k +
            "</span>" +
            "</div>" +
            "</div>");
        }
      }

      generate_box();

      // Create the correct sequence of prizes - index 0 is 9th of January
      //    guide   = ["9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"];

      // Create an array of possible values
      const values = ["A1", "B2", "C3", "D4"];

      // An array of four possible background images

      const backgroundImages = [
        "./img/Prize1.png",
        "./img/Prize2.png",
        "./img/Prize3.png",
        "./img/Prize4A.png",
      ];

      function buildImages() {
        // the container
      }

      // run the script here.
      buildImages();

      // Create the starting time value
      const timer = 120;

      function createRandomSequence(my_div2) {
        // Create an empty array to store the random sequence
        let sequence = [];

        // Add a random value to the sequence, making sure it's not the same as the
        // previous value and the 9th value is different from the correct (10th value)
        let previousValue = null;
        while (sequence.length < 10) {
          let randomIndex = Math.floor(Math.random() * values.length);
          let randomValue = values[randomIndex];
          if (
            randomValue !== previousValue &&
            randomValue !== correct[dateToday - 9]
          ) {
            sequence.push(randomValue);
            previousValue = randomValue;
          }
        }
        // Make sure the last value in the sequence is correct
        sequence[sequence.length - 1] = correct[dateToday - 9];
        console.log(correct[dateToday - 9], "correct[dateToday - 9]");

        return sequence;
      }

      function updateDiv(my_div, sequence) {
        let index = 0;
        setInterval(() => {
          // Stop the interval when we reach the end of the sequence
          if (index >= sequence.length) {
            clearInterval(this);
            return;
          }

          // Update the div with the next value in the sequence
          my_div.innerHTML = sequence[index];

          my_div.setAttribute("src", sequence[index]);

          // Set the background image of the div to the image at the random index
          my_div.style.backgroundImage = `url(${
            backgroundImages[values.indexOf(sequence[index])]
          })`;

          index++;
          console.log(my_div, "my_div");
        }, timer); // Update the div
      }
      let clicked = false;

      function click_box() {
        let allButtons = document.querySelectorAll(".btn-box");
        allButtons.forEach(function (b, i) {
          b.addEventListener(
            "click",
            function () {
              if ((clicked = true)) {
                $(this).remove("btn-box");
                $(this).addClass("btn-box2");
              }
              console.log(clicked);
              let buttonId = $(this).attr("id");

              $("#modal-container").addClass(buttonId);
              $("body").addClass("modal-active");

              $(".close-btn").click(function () {
                $("#modal-container").removeClass(buttonId);
                $("body").removeClass("modal-active");
              });
              let sequence = createRandomSequence();
              console.log(sequence, "seq");
              // Get the div element
              let my_div = document.getElementById("my-div");
              console.log(my_div, "div");
              // Start updating the div with the values from the sequence
              updateDiv(my_div, sequence);
              console.log(sequence, "sequence");
              document.getElementById("secventa").innerHTML = sequence;
            },
            {
              once: true,
            }
          );
        });
      }

      click_box();
    </script>
  </body>
</html>
