<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Document</title>
    <style>
      ul li {
        padding: 2em;
        border: 1px solid black;
        width: 200px;
        height: fit-content;
        list-style: none;
        background-color: blueviolet;
        color: white;
      }
      ul {
        display: flex;
        flex-wrap: wrap;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 10px;
        justify-content: center;
      }
      .container {
        max-width: 1200px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: grey;
      }
      .suggestion {
        padding: 1em;
        width: 230px;
        height: 100px;
        background-color: crimson;
        color: white;
        border: 1px solid black;
      }
      .input_container  {
        justify-content: flex-start !important;
        align-items: flex-start !important;
        color: white;
        font-size: 1.2em;
      }
      .container_suggestion,.input_container {
        display: flex;
        justify-content: center;
        flex-direction: column;
        text-align: center;
        align-items: center;

        /* background-color: grey; */
        /* border: 2px solid red; */
      }
      .InsertSuggestion.game-suggestions.movie-suggestions.game-and-movie-suggestion {
      }
      .InsertSuggestion {
        width: 60em;
        height: 30em;
        border: 2px solid black;
        position: relative;
        background-color: antiquewhite;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        align-items: flex-start;
        justify-content: start;
        overflow: scroll;
        padding: 2em 0.5em;
      }
      .InsertSuggestion::after {
        position: absolute;
        content: "";
        top: 0;
        left: 0;
        font-size: 1em;
        text-transform: uppercase;
        font-weight: bold;
        text-align: center;
      }

      .InsertSuggestion.game-suggestions::after {
        content:"joc cu litera- gasina in array ul > game";
      }
      .InsertSuggestion.movie-suggestions::after {
        content: "joc cu litera- gasina in array ul > movie";
      }
      .InsertSuggestion.game-suggestions.movie-suggestions::after {
        content: "joc cu litera - gasina in ambele array uri > game si movie";
      }
      .InsertSuggestion.game-and-movie-suggestion::after {
        content: "joc cu litera - gasina in ambele array uri > game si movie";
      }
      .InsertSuggestion.dont_have::after {
        content: "nu gasesc cuvantul in arrays dar pentru tine iti arat";
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="input_container">
      <label for="search_text">Cauta Jocul Potrivit</label>
      <input type="text" id="search-input" name="search_text" />
    </div>
      <ul id="game-list"></ul>
      <div class="container_suggestion">
        <h2>sugestii in functie de search</h2>
        <div id="InsertSuggestion" class="InsertSuggestion">
     
        </div>
      </div>
    </div>

    <script>
      const games = [
        "Super Mario Bros1.",
        "The Legend of Zelda1",
        "Minecraft1",
        "Tetris",
        "Fortnite",
        "Grand Theft Auto V",
        "Call of Duty: Modern Warfare",
        "Animal Crossing: New Horizons",
        "Among Us",
        "FIFA 21",
        "test",
        "test",
      ];
      const gameSuggestions = [
        "Portal2",
        "Half-Life2",
        "Team Fortress 2",
        "Counter-Strike: Global Offensive2",
        "Left 4 Dead",
        "DOTA 2",
        "Teamfight Tactics",
        "Overwatch",
        "Rocket League",
        "PlayerUnknown's Battlegrounds",
        "Avatar in game",
        "lol","tetris",
        "vikings"
      ];
      const movieSuggestions = [
        "The Godfather3",
        "The Shawshank Redemption3",
        "The Dark Knight3",
        "Forrest Gump",
        "The Matrix",
        "Star Wars",
        "Jurassic Park",
        "Titanic",
        "Inception",
        "Avatar in movie",
        "dota",
      
      ];

      // Get search input and game list
      const searchInput = document.getElementById("search-input");
      const gameList = document.getElementById("game-list");

      // Function to display game list
      function displayGames(gameArray) {
        // Clear game list
        gameList.innerHTML = "";
        // Loop through games and add to list
        gameArray.forEach((game) => {
          const li = document.createElement("li");
          li.textContent = game;
          gameList.appendChild(li);
        });
      }

      // Display all games initially
      displayGames(games);
      // Function to filter games based on search input
      function filterGames() {
        // Get search input value and convert to lowercase
        const searchValue = searchInput.value.toLowerCase();
        // Filter games based on search input
        const filteredGames = games.filter((game) =>
          game.toLowerCase().includes(searchValue)
        );
        console.log(searchValue, "fas");
        // Display filtered games
        displayGames(filteredGames);
        // Display suggestions if search input is not empty
        if (searchValue !== "") {
          displaySuggestions(
            filteredGames,
            searchValue,
            "gamesuggestion",
            "moviesuggestion",
            gameSuggestions,
            movieSuggestions
          );
          // Check if search value is not found in suggestion arrays
          const allSuggestions = [...gameSuggestions, ...movieSuggestions];
          const parentElement = document.querySelector(".InsertSuggestion");
          const isSuggestionFound = allSuggestions.some((suggestion) =>
            suggestion.toLowerCase().startsWith(searchValue)
          );
          if (!isSuggestionFound) {
            console.log("not Found");
            parentElement.classList.add("dont_have");
            parentElement.classList.remove("game-suggestions");
            parentElement.classList.remove("movie-suggestions");
          } else {
            console.log("Found");
            parentElement.classList.remove("dont_have");
     
            
          }
        } else {
          clearSuggestions();
        }
      }

      // Function to display suggestions based on search value and array of suggestions
      function displaySuggestions(
        filteredGames,
        searchValue,
        suggestionType,
        ...suggestionArrays
      ) {
        // Clear previous suggestions
        clearSuggestions();
        // Combine all suggestion arrays into a single array
        const allSuggestions = suggestionArrays.flat();
        console.log(allSuggestions, "allSuggestions_test");
        // Get suggestions from allSuggestions array based on search value
        const suggestions = allSuggestions
          .filter((suggestion) =>
            suggestion.toLowerCase().startsWith(searchValue)
          )
          .slice(0, 7);
        // Display suggestions
        if (suggestions.length > 0) {
          suggestions.forEach((suggestion) => {
            if (filteredGames.includes(suggestion)) {
              // Don't suggest a game that is already in the filtered list
              return;
            }
            const parentElement = document.querySelector(".InsertSuggestion");
            const suggestionElement = document.createElement("div");
            suggestionElement.classList.add("suggestion");
            suggestionElement.textContent = suggestion;
            parentElement.appendChild(suggestionElement);
            const isGameSuggestion = gameSuggestions.includes(suggestion);
            const isMovieSuggestion = movieSuggestions.includes(suggestion);
            // Add classes to parent element based on suggestion type
            if (isGameSuggestion && isMovieSuggestion) {

              parentElement.classList.add("game-and-movie-suggestion");
              suggestionsDisplayed = true;
            } else if (isGameSuggestion) {

              parentElement.classList.add("game-suggestions");
              suggestionsDisplayed = true;
            } else if (isMovieSuggestion) {
              parentElement.classList.add("movie-suggestions");

              suggestionsDisplayed = true;
            }
             parentElement.appendChild(suggestionElement);
            // searchInput.parentNode.insertBefore(suggestionElement, searchInput.nextSibling);
          });
        } else {
          displayGames(games);
          allSuggestions.forEach((suggestion) => {
            if (filteredGames.includes(suggestion)) {
              // Don't suggest a game that is already in the filtered list
              return;
            }
            const parentElement = document.querySelector(".InsertSuggestion");
            const suggestionElement = document.createElement("div");
            suggestionElement.classList.add("suggestion");
            suggestionElement.textContent = suggestion;
            parentElement.appendChild(suggestionElement);

            const isGameSuggestion = gameSuggestions.includes(suggestion);
            const isMovieSuggestion = movieSuggestions.includes(suggestion);

            // // Add classes to parent element based on suggestion type
            // if (!isGameSuggestion && !isMovieSuggestion) {
            //   console.log("test1");
            //   console.log(!isGameSuggestion);
            //   console.log(!isMovieSuggestion);
            //   
            // }
          });
        }
      }

      // Function to clear suggestions
      function clearSuggestions() {
        // Get all suggestions and remove them
        const searchValue = searchInput.value.toLowerCase();
        const suggestions = document.querySelectorAll(".suggestion");
        suggestions.forEach((suggestion) => suggestion.remove());
        const parentElement2 = document.querySelector(".InsertSuggestion");
        if (!searchValue) {
          parentElement2.classList.remove(
            "game-suggestions",
            "movie-suggestions",
            "game-and-movie-suggestion",
            "dont_have"
          );
        }
      }
      // Add event listener to search input
      searchInput.addEventListener("input", filterGames);
    </script>
  </body>
</html>
