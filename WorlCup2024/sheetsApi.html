<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Match Info</title>
  <style>
    .content-cote {
      border: 1px solid #ccc;
      margin: 10px;
      padding: 10px;
    }
    .matches-cote, .date-cote, .number-cote {
      margin-bottom: 5px;
    }
    .matches-cote p, .date-cote p, .number-cote p {
      display: inline;
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <div id="coteMatch"></div>

  <script>
   const SHEET_ID = '1pt__R7igjnx-IVYYRs0bXH6wOrREYVjeIN83ZNu8zBw';
    const SHEET_TITLE = 'test_cote';
    const FULL_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?sheet=${SHEET_TITLE}`;

    async function fetchMatches() {
      const response = await fetch(FULL_URL);
      const text = await response.text();
      console.log(text,"fas")
      const jsonData = JSON.parse(text.substr(47).slice(0, -2));
      console.log(jsonData,"dasa")

      const matches = jsonData.table.rows.map(row => ({
        team1: row.c[0] ? row.c[0].v : '',
        team2: row.c[1] ? row.c[1].v : '',
        date: row.c[2] ? formatDate(row.c[2].f) : '',
        cote: {
          x1: row.c[3] ? row.c[3].v : '',
          x: row.c[4] ? row.c[4].v : '',
          x2: row.c[5] ? row.c[5].v : '',
        },
      }));
console.log(matches,"fasfa")
      return matches;
    }
    function formatDate(dateString) {
      const date = new Date(dateString);
      const day = String(date.getDate()).padStart(2, '0');
      const month = String(date.getMonth() + 1).padStart(2, '0'); // Lunile sunt indexate de la 0 la 11
      const year = String(date.getFullYear()).slice(2); // Luăm doar ultimele două cifre ale anului
      return `${day}-${month}-${year}`; // Returnăm data în formatul DD-MM-YY
    }
    async function addInfoCotes() {
      const matches = await fetchMatches();
      const htmlContent = matches.map(match => `
        <div class="content-cote">
          <div class="matches-cote"><p>${match.team1}</p> <p>${match.team2}</p></div>
          <div class="date-cote"><p>${match.date}</p></div>
          <div class="number-cote">
            <p> ${match.cote.x1} <span>|</span></p>
            <p> ${match.cote.x} <span>|</span></p>
            <p> ${match.cote.x2} </p>
          </div>
        </div>
      `).join("");

      const coteMatchElement = document.getElementById("coteMatch");
      coteMatchElement.insertAdjacentHTML("beforeend", htmlContent);
    }

    addInfoCotes();
  </script>
</body>
</html>
