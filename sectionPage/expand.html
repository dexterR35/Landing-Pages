<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
      integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <style>
      /* Lightbox container */

      /* Empty container that will replace the original container */

      :root {
        --width-container-box-text: calc(50% + 5em);
      }
      .container-box {
        max-width: var(--width-container-box-text);
        background: rgba(217, 217, 217, 0.716);
        height: auto;
      }
      .container-box:has(.-expanded) {
        color: pink;
        /* max-width: 400px; */
        overflow: inherit;
        transition: all 0.5s;
        transition-delay: 0s;
      }

      .out-animation {
        animation: outlightbox 0.8s forwards;
      }

      .expand-button {
        cursor: pointer;
        display: block;
        min-width: 30%;
        max-width: 40%;
        margin-top: 1rem;
        margin-left: auto;
        margin-right: auto;
        border: 4px solid #005858;
        border-radius: 3px;
        background-color: darkcyan;
        color: white;
        font-size: 0.7rem;
        padding: 0.5rem;
      }

      .expand-button:hover,
      .expand-button:active,
      .expand-button:focus {
        background-color: #cad00e;
      }

      .special-text-box {
        white-space: wrap;
        position: relative;
        max-height: 50px;
        overflow: hidden;
        transition: max-height 1s ease;
        /* text-align: justify; */
      }
      .special-text-box.-expanded {
        max-height: 50vh;
        overflow: normal;
      }

      .special-text-box:not(.-expanded)::after {
        content: "";
        position: absolute;
        top: 0;
        color: crimson;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(
          rgba(141, 142, 142, 0),
          rgba(255, 255, 255, 0.37)
        );
      }
      .container-box:has(.-expanded) {
        color: crimson;
        background: crimson;
        transition: max-height 1.2s ease;
      }
      .container-box-icon {
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        width: 30px;
        height: 30px;
        font-size: 18px;
        z-index: 5;
        color: #fff;
        transform: rotate(0deg);
        cursor: pointer;
        border-radius: 50%;
        transition: all 0.75s cubic-bezier(0.215, 0.61, 0.355, 1);
        transition-delay: 0.5s;
      }
      .container-box-icon.is-expanded {
        left: 100%;
        transform: rotate(405deg);
        transition-delay: 0s;
      }

      .box-container-section ul li {
        list-style: none;
      }
    </style>
    <title>Document</title>
  </head>

  <body>
    <div class="container-box">
      <span class="container-box-icon js-expand-box" title="Did You Know?"
        >&plus; close</span
      >
      <div class="box-container-section">
        <div class="special-text-box">
          <ul>
            <li>
              Acest loc unic aduce un omagiu tradiției de lungă durată a
              Qatarului în ceea ce privește comerțul mondial și navigația
              maritimă. Nu numai că 974 este prefixul internațional al
              Qatarului, dar este și numărul exact al containerelor de transport
              maritim folosite la construcție. Situat în zona portuară și cu
              vedere la peisajul urban de coastă al orașului Doha, fanii de la
              Stadionul 974 vor simți briza răcoroasă care vine dinspre Golful
              Arabiei.
            </li>
            <li>Au fost utilizate 27.000 de tone de oțel</li>
            <li>
              Au fost necesare 4.5 milioane de ore de muncă pentru a fi ridicat.
            </li>
            <li>Are o capacitate de 40.000 de locuri.</li>
            <li>Construcție 2018 - 2021.</li>
            <li>Proiectare: Fenwick Iribarren Architects'</li>
            <li>
              După turneu, containerele și suprastructura vor fi refolosite.
              Acest nou concept asigură că, deși prezența fizică a stadionului
              974 poate fi temporară, moștenirea sa va fi eternă
            </li>
          </ul>
        </div>
        <button class="expand-button">Citeste mai mult</button>
      </div>
    </div>
    <script>

      $(".expand-button").on("click", function () {
        $(".special-text-box").toggleClass("-expanded");
        // $(".js-expand-box").toggleClass("is-expanded");
        //  $(".figcaption").toggleClass("is-expanded");

        if ($(".special-text-box").hasClass("-expanded")) {
          $(".expand-button").html("inchide fereastra");
        } else {
          $(".expand-button").html("Citeste mai mult");
        }
      });
    </script>
    <script>
            console.log("start2");
            // $("body").append(
            //   '<style id="lightbox-animations" type="text/css"></style>'
            // );
            console.log("start3");
            /* Click on the container */
            $(".container-box").on("click", function () {
              /* The position of the container will be set to fixed, so set the top & left properties of the container */
              let bounding_box = $("#container-box").get(0).getBoundingClientRect();
              console.log("start4");
              console.log(bounding_box, "testss");
              $(this).css({
                top: bounding_box.top + "px",
                left: bounding_box.left + "px",
              });
              console.log("start3");
              /* Set container to fixed position. Add animation */
              $(this).addClass("in-animation");
              $(this).css("overflow", "auto");

              /* An empty container has to be added in place of the lightbox container so that the elements below don't come up
        Dimensions of this empty container is the same as the original container */
                $('<div id="empty-container">sdasda</div>').insertAfter("#container-box-icon");

              /* To animate the container from full-screen to normal, we need dynamic keyframes */
      let styles = ``;

      styles = `@keyframes outlightbox {
      		0% {
                  height: 100%;
                  width: 100%;
                  top: 0px;
                  left: 0px;
      		}
            50% {
              height: 200px;
              top: ${bounding_box.y}px;
      		}
      		100% {
            height: 200px;
            width: 500px;
            top: ${bounding_box.y}px;
            left: ${bounding_box.x}px;
      		}
      	}`;

              /* Add keyframe to CSS */
              $("#lightbox-animations").get(0).sheet.insertRule(styles, 0);

              /* Hide the window scrollbar */
              //   $("body").css('overflow', 'hidden');
            });

            /* Click on close button when full-screen */
            $("#close").on("click", function (e) {
              $("#close").hide();

              /* Window scrollbar normal */
              //   $("body").css('overflow', 'auto');

              /* Show animation */
              $("#container-box-icon").addClass("out-animation");

              e.stopPropagation();
            });

      /* On animationend : from normal to full screen & full screen to normal */
        $("#container-box").on("animationend", function (e) {
          /* On animation end from normal to full-screen */
          if (e.originalEvent.animationName == "inlightbox") {
            $("#close").show();
          } else if (e.originalEvent.animationName == "outlightbox") {
            /* On animation end from full-screen to normal */
            $("#container-box").css("overflow", "hidden");
            /* Remove fixed positioning, remove animation rules */
            $("#container-box")
              .removeClass("in-animation")
              .removeClass("out-animation");

            /* Remove the empty container that was earlier added */
            $("#empty-container").remove();

            /* Delete the dynamic keyframe rule that was earlier created */
            $("#lightbox-animations").get(0).sheet.deleteRule(0);
          }
        });
    </script>
  </body>
</html>
