<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
      integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      @charset "UTF-8";
      /* CSS Document */

      body {
        font-family: "Fjalla One", Segoe, "Segoe UI", "DejaVu Sans",
          "Trebuchet MS", Verdana, sans-serif;
      }

      .content-quiz {
        background-color: #eee;
        width: 75%;
        max-width: 800px;
        min-height: 170px;
        box-shadow: 5px 5px 9px #333;
      }

      #quiz {
        display: none;
        margin-top: 50px;
        font-size: x-large;
      }

      ul {
        list-style-type: none;
        padding: 0;
        margin-bottom: 10px;
        font-size: smaller;
      }

      input[type="radio"] {
        margin-right: 15px;
      }
      button {
        position: relative;
        float: right;
        margin-left: 5px;
        margin-top: 15px;
      }

      #prev_quiz {
        display: none;
      }

      #start-quiz {
        display: none;
        width: 90px;
      }

      #warning {
        color: #800000;
        font-weight: bold;
        margin-top: 25px;
      }

      @media (max-width: 767px) {
        #start-quiz {
          margin-left: 25px;
        }
      }

  
    </style>
    <title>Document</title>
  </head>
  <body>
    <div id="source">s</div>
    <div class="test" id="test">s</div>
    <section class="content-quiz container-fluid-quiz" id="quiz">
    
      <div id="container-questions">
        <!-- questions and options will be displayed here -->
      </div>
      <button class="btn-quiz" id="next-quiz">next-quiz</button>
      <button class="btn-quiz" id="prev_quiz">prev_quiz</button>
      <button class="btn-quiz" id="start-quiz">start-quiz Over</button>
    </section>

    <script>
      // JavaScript Document
      $(document).ready(function () {
        "use strict";

        let questions = [
          {
            id: 0,
            question:
              "What is defined in physics as 'a nuclear reaction in which nuclei combine to form more massive nuclei'?",
            choices: ["fission", "farking", "fracking"],
            details: "test",
            correctAnswer: 1,
          },
          {
            id: 1,
            question: "What is the capital of Australia?",
            choices: ["Melbourne", "Sydney", "Canberra"],
            details: "test2",
            correctAnswer: 2,
          }
          // },
          // {
          //   id: 2,
          //   question: "Who is the prime minister of the U.K.?",
          //   choices: ["Tony Blair", "David Cameron", "Nicolas Sarkozy"],
          //   details: "test",
          //   correctAnswer: 1,
          // },
          // {
          //   id: 3,
          //   question: "What is the first perfect number?",
          //   details: "test",
          //   choices: [38, 6, 0],
          //   correctAnswer: 1,
          // },
          // {
          //   id: 4,
          //   question: "What colors are on the flag of Norway?",
          //   choices: [
          //     "red and blue",
          //     "red and white",
          //     "red, white, and silver",
          //   ],
          //   details: "test",
          //   correctAnswer: 3,
          // },
          // {
          //   id: 5,
          //   question: "When did the Soviet Union collapse?",
          //   choices: ["14 February 1989", "1 January 1988", "31 October 1993"],
          //   details: "test",
          //   correctAnswer: 3,
          // },
          // {
          //   id: 6,
          //   question: "What is the currency of Switzerland?",
          //   details: "test",
          //   choices: ["franc", "Euro", "rupee"],
          //   correctAnswer: 1,
          // },
          // {
          //   id: 7,
          //   question: "What is the square root of 256?",
          //   details: "test",
          //   choices: [24, 25, 30],
          //   correctAnswer: 2,
          // },
          // {
          //   id: 8,
          //   question: "What are the three main types of rocks?",
          //   choices: [
          //     "igneous, volcanic, quartz",
          //     "sedimentary, igneous, metamorphic",
          //     "gargantuan, feldspar, quartz",
          //   ],
          //   details: "test",
          //   correctAnswer: 1,
          // },
          // {
          //   id: 9,
          //   question:
          //     "What movie did Leonardo DiCaprio win a BAFTA Film Award for?",
          //   choices: [
          //     "Inception",
          //     "What's Eating Gilbert Grape",
          //     "The Revenant",
          //   ],
          //   details: "test",
          //   correctAnswer: 2,
          // },
          // {
          //   id: 10,
          //   question:
          //     "What movie did Leonardo DiCaprio win a BAFTA Film Award for?",
          //   choices: [
          //     "Inception",
          //     "What's Eating Gilbert Grape",
          //     "The Revenant",
          //   ],
          //   details: "test",
          //   correctAnswer: 2,
          // },
          // {
          //   id: 11,
          //   question:
          //     "What movie did Leonardo DiCaprio win a BAFTA Film Award for?",
          //   choices: [
          //     "Inception",
          //     "What's Eating Gilbert Grape",
          //     "The Revenant",
          //   ],
          //   details: "test2",
          //   correctAnswer: 2,
          // },
        ];
        let countOfQuestion = document.querySelector(".number-of-questions");
        let questionCounter = 0; //Tracks question number
        let selections = []; //Array containing user choices
        let quiz = $(".content-quiz"); //Quiz div object
        let details = 0;
        let correctAnswer = questions[0].correctAnswer;
        console.log(correctAnswer,"corect")
        let questionCount;
        console.log(correctAnswer);

        // Display initial question
        displayNext();

        // Click handler for the 'next-quiz' button
        $("#next-quiz").on("click", function (e) {
          e.preventDefault();

          // Suspend click listener during fade animation
          if (quiz.is(":animated")) {
            return false;
          }
          choose();

          // If no user selection, progress is stopped
          if (isNaN(selections[questionCounter])) {
            $("#warning").text("Please make a selection!");
          } else {
            questionCounter++;
            displayNext();
            $("#warning").text("");
          }
        });

        // Click handler for the 'prev_quiz' button
        // $("#prev_quiz").on("click", function (e) {
        //   e.preventDefault();

        //   if (quiz.is(":animated")) {
        //     return false;
        //   }
        //   choose();
        //   questionCounter--;
        //   displayNext();
        // });
        //

    
        console.log(correctAnswer,"corect")
        // Click handler for the 'start-quiz Over' button
        $("#start-quiz").on("click", function (e) {
          e.preventDefault();

          if (quiz.is(":animated")) {
            return false;
          }
          questionCounter = 0;
          selections = [];
          displayNext();
          $("#start-quiz").hide();
        });

        // Creates and returns the div that contains the questions and
        // the answer selections
        function createQuestionElement(index) {
          console.log(index, "index");

          let qElement = $("<div>", {
            id: "question",
          });

          let headerQz = $("<h3>ÃŽntrebarea " + (index + 1) +  " " + "din" + " " + questions.length  + ":</h3>");
          qElement.append(headerQz);

          let question = $("<p>").append(questions[index].question);
          let quotes = $("<p>").append(questions[index].details);
          let answers = $("<p>").append(questions[index].correctAnswer);
          qElement.append(question, quotes, answers);
     
          for (let i of questions) {
            console.log(i, "i of questions");
            console.log(i.correctAnswer, "corect");
          }
        
          let radioButtons = createRadios(index);
          qElement.append(radioButtons);
          // this is new
          let warningText = $('<p id="warning">');
          qElement.append(warningText);

          return qElement;
        }
        console.log(correctAnswer,"corect")


        //Checker Function to check if option is correct or not
        function checker(userOption) {
          let userSolution = userOption.innerText;
          let question =
            document.getElementsByClassName("container-mid")[questionCount];
          let options = question.querySelectorAll(".option-div");

          console.log(options, "options checker");
          console.log(userSolution, "userSolution checker");

          //if user clicked answer == correct option stored in object
          if (userSolution == questions[questionCount].correct) {
            userOption.classList.add("correct");
            quotes.classList.add("show_quotes");
            console.log(userOption, "win");
            scoreCount++;
          } else {
            userOption.classList.add("incorrect");

            //For marking the correct option
            options.forEach((element) => {
              if (element.innerText === questions[questionCount].correct) {
                element.classList.add("correct");
                console.log(userOption, "lose");
              }
            });
          }

          // //clear interval(stop timer)
          // clearInterval(countdown);
          // //disable all options
          // options.forEach((element) => {
          //     element.disabled = true;
          // });
        }
        // Creates a list of the answer choices as radio inputs
        function createRadios(index) {
          let radioList = $("<ul>");
          let itemQz;
          let input = "";

          for (let i = 0; i < questions[index].choices.length; i++) {
            console.log(i, "i");
            itemQz = $("<li>");
            input = '<input type="radio" name="answer" value=' + i + " />";
            input += questions[index].choices[i];
            itemQz.append(input);
            radioList.append(itemQz);
          }

          return radioList;
        }

        // Reads the user selection and pushes the value to an array
        function choose() {
          selections[questionCounter] = +$(
            'input[name="answer"]:checked'
          ).val();
          console.log("am ales casuta cu nr", selections[questionCounter]);
          console.log(questions, "lala");
     
       
        }

        // Displays next-quiz requested element
        function displayNext() {
          quiz.fadeOut(function () {
            $("#question").remove();

            if (questionCounter < questions.length) {
              let nextQuestion = createQuestionElement(questionCounter);
              quiz.append(nextQuestion).fadeIn();
              if (!isNaN(selections[questionCounter])) {
                $("input[value=" + selections[questionCounter] + "]").prop(
                  "checked",
                  true
                );
              }

              // Controls display of 'prev_quiz' button
              if (questionCounter === 1) {
                $("#prev_quiz").show();
              } else if (questionCounter === 0) {
                $("#prev_quiz").hide();
                $("#next-quiz").show();
              }
            } else {
              let scoreElem = displayScore();
              quiz.append(scoreElem).fadeIn();
              $("#next-quiz").hide();
              $("#prev_quiz").hide();
              $("#start-quiz").show();
            }
          });
        }

        console.log(details, "questions");

        // Computes score and returns a paragraph element to be displayed
        function displayScore() {
          let score = $("<h3 class='scoteTs'>", { id: "question" });

          let numCorrect = 0;
          for (let i = 0; i < selections.length; i++) {
            if (selections[i] === questions[i].correctAnswer) {
              numCorrect++;
            }
          }
          // Calculate score and display relevant message
          let percentage = numCorrect / questions.length;
          if (percentage >= 0.9) {
            score.append(
              "Incredible! You got " +
                numCorrect +
                " out of " +
                questions.length +
                " questions right!"
            );
          } else if (percentage >= 0.7) {
            score.append(
              "Good job! You got " +
                numCorrect +
                " out of " +
                questions.length +
                " questions right!"
            );
          } else if (percentage >= 0.5) {
            score.append(
              "You got " +
                numCorrect +
                " out of " +
                questions.length +
                " questions right."
            );
          } else {
            score.append(
              "You only got " +
                numCorrect +
                " out of " +
                questions.length +
                " right. Want to try again?"
            );
          }
          return score;
        }
      });
    </script>
  </body>
</html>
